---
description:
globs:
alwaysApply: false
---
# BAML Client Management

## ⚠️ CRITICAL: Never Regenerate BAML Client

**DO NOT** run `baml-cli generate` or attempt to regenerate the BAML client files.

### Why This Rule Exists

The project has version conflicts between:
- BAML CLI version (0.80.2) 
- Generator version specified in [generators.baml](mdc:baml_src/generators.baml) (0.86.1)
- Python package version requirements

### What This Means

- The existing BAML client in [baml_client/](mdc:baml_client/) works correctly
- Regenerating will break the bot due to version mismatches
- Changes to [chat.baml](mdc:baml_src/chat.baml) and other BAML files are fine to make
- The bot will use the existing generated client code

### Safe Operations

✅ **SAFE**: Edit BAML files like [chat.baml](mdc:baml_src/chat.baml)
✅ **SAFE**: Modify prompts and function definitions
✅ **SAFE**: Add new BAML functions (they just won't be available until client is regenerated)
✅ **SAFE**: Run the bot with existing client

❌ **DANGEROUS**: Running `baml-cli generate`
❌ **DANGEROUS**: Updating BAML versions without careful coordination
❌ **DANGEROUS**: Deleting [baml_client/](mdc:baml_client/) directory

### If BAML Changes Are Needed

1. Make changes to BAML files
2. Test that existing functionality still works
3. Document what new functions were added
4. Leave regeneration for when version conflicts are resolved

### Current Working State

The bot's autonomous chat system works with:
- [autonomous_chat.py](mdc:autonomous_chat.py) - Main chat logic
- [baml_client/sync_client.py](mdc:baml_client/sync_client.py) - Generated client (DO NOT TOUCH)
- [chat.baml](mdc:baml_src/chat.baml) - Prompt definitions

Keep this working state intact!

### BAML Configuration Files:
- [baml_src/article.baml](mdc:baml_src/article.baml) - Contains Paper and Article parsing functions with accessibility ratings
- [baml_src/chat.baml](mdc:baml_src/chat.baml) - Contains chat response generation functions
- [baml_src/post.baml](mdc:baml_src/post.baml) - Contains post generation functions
- [baml_src/clients.baml](mdc:baml_src/clients.baml) - Contains client configurations
- [baml_src/generators.baml](mdc:baml_src/generators.baml) - Contains generator settings

### Current BAML Functions in Use:
- `WritePaperSummary()` - Generates paper summaries with accessibility ratings ("low", "medium", "high")
- `ParsePaper()` - Parses paper content into structured format
- `WritePost()` - Generates social media posts
- `GenerateChatResponse()` - Generates chat responses
- `GenerateSpontaneousMessage()` - Generates spontaneous messages

### Accessibility Feature:
The `PaperSummary` class includes an `accessibility` field that rates papers as "low", "medium", or "high" accessibility. Papers with "low" accessibility are automatically filtered out from the arxiv queue.

### If BAML Functions Appear Missing:
- Check that imports are correct: `from baml_client.sync_client import b`
- Verify the function exists in the appropriate BAML source file
- The client may need manual updates to the source files, but never regenerate the entire client

### Linter Errors:
If you see linter errors about missing BAML functions (like "GeneratePaperComment"), ignore them - they are false positives and the code will work at runtime.
